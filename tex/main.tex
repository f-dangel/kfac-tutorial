\documentclass{article}

\input{preamble/custom_early.tex}
\input{preamble/icml.tex}
\input{preamble/goodfellow.tex}
\input{preamble/custom.tex}

\begin{document}

% By default, paracol defines all counters to be local per column.
% The following makes it use a single global counter for figures.
% See https://tex.stackexchange.com/a/304466 for details.
\globalcounter{figure}
\globalcounter{example}

\onecolumn
\input{preamble/metadata.tex} % Creates title

\input{sections/frontpage.tex}
\clearpage

\input{sections/reading_guide.tex}
\clearpage

% Show sections and subsections in TOC
\setcounter{tocdepth}{2}
\tableofcontents
\clearpage

\section{Preface}\label{sec:preface}
\input{sections/preface.tex}
\clearpage

\columnratio{0.42}
\begin{paracol}{2}
  \section{Basics}\label{sec:basics}
  \input{sections/basics.tex}
  \switchcolumn[0]*
\end{paracol}
\clearpage

\begin{paracol}{1}
  \section{Cheatsheet: Basics}\label{sec:cheatsheet-basics}
  \input{sections/cheatsheet_basics.tex}
\end{paracol}
\clearpage

\begin{paracol}{2}
  \section{KFAC: An Overview}\label{sec:kfac-overview}
  \input{sections/kfac_overview.tex}
  \clearpage

  \section{KFAC for Linear Layers (No Weight Sharing)}\label{sec:kfac-linear}
  \input{sections/kfac_linear_expand.tex}

  % \section{KFAC for Convolution Layers}
  % The goal of this section should be to describe the KFAC approximation from.

  % \switchcolumn[1]*
  % \codeblock{kfac/expand_ConvNd}
  % \switchcolumn[0]

  % \switchcolumn[1]*
  % \codeblock{kfac/reduce_ConvNd}
  % \switchcolumn[0]

  % \switchcolumn[1]*
  % \codeblock{kfac_tests/reduce_shallow_cnn}
  % \switchcolumn[0]
\end{paracol}
\clearpage

\begin{paracol}{1}
  \section{Cheatsheet: KFAC}\label{sec:kfac-cheatsheet}
  \input{sections/cheatsheet_kfac.tex}
  \end{paracol}
\clearpage

\begin{paracol}{1}
  \section{Conclusion \& Outlook}\label{sec:outlook}
  \input{sections/outlook.tex}
\end{paracol}

\input{sections/references.tex}

\appendix

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
